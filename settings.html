<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="assets/bootstrap.min.css">
    <link rel="stylesheet" href="assets/style.css"> 
    <title>To-Do Make - Settings</title>
</head>

<body class="settings-body">
    <div class="container d-flex settings-container flex-nowrap">
        <div class="col-4 me-5" id="settings-sidebar">
            <div class="settings-title">
                Settings
            </div>
            <div class="settings-entry selected" id="appearance">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-display-fill settings-icon" viewBox="0 0 16 16">
                    <path d="M5 3.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-7zM0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H1z"/>
                </svg>
                Appearance
            </div>
            <div class="settings-entry" id="indexing">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-clipboard-check settings-icon" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0"/>
                    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1
-1h-1z"/>
            <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
                </svg>
                Indexing
            </div>
            <div class="settings-entry" id="backup">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-device-ssd settings-icon" viewBox="0 0 16 16">
                    <path d="M4.75 4a.75.75 0 0 0-.75.75v3.5c0 .414.336.75.75.75h6.5a.75.75 0 0 0 .75-.75v-3.5a.75.75 0 0 0-.75-.75zM5 8V5h6v3zm0-5.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m7 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0M4.5 11a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1m7 0a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"/>
                    <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zm11 12V2a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1v-2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2a1 1 0 0 0 1-1m-7.25 1v-2H5v2zm1.75 0v-2h-.75v2zm1.75 0v-2H8.5v2zM11 13h-.75v2H11z"/>
                </svg>
                Backup and Restore
            </div>

            <div class="settings-entry" id="about">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-info-circle settings-icon" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                    <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
                </svg>
                About
            </div>
        </div>
        <div class="col-8">
            <div class="settings-pane" id="appearance-pane">
                <div class="section-heading">
                    Wallpaper
                </div>
                <div class="row flex settings-section align-contents-center">
                    <div class="col-auto zero-margin zero-padding">Change background on To-Do List and Notebook pages
                    </div>
                    <div class="col-auto d-flex zero-margin zero-padding w-100 mt-2 settings-wallpaper-preview">
                        <img class="settings-wallpaper-preview-img">
                    </div>
                    <div class="col-auto zero-margin zero-padding w-100 mt-2">
                        <button class="btn btn-primary background-reset-btn">Restore to default</button>
                        <label for="backgroundInput" class="btn btn-primary browse-background-btn">Browse for background</label>
                        <input type="file" id="backgroundInput" name="jsonBackgroundInput" accept="image/*" style="display: none;" />
                    </div>
                </div>
            </div>

            <div class="settings-pane hidden" id="backup-pane">
                <div class="section-heading">
                    Restore data
                </div>
                <div class="row flex settings-section align-contents-center mb-4">
                    <div class="col-auto zero-margin zero-padding">
                    Either restore all data from a JSON file, or import it and select elements for restore from below.
                    </div>
                    <div class="col-auto zero-margin zero-padding w-100 mt-2">
                        <label for="jsonAllInput" class="btn btn-primary restore-all-btn">Restore all from JSON file</label>
                        <input type="file" id="jsonAllInput" name="jsonAllInput" accept=".json" style="display: none;" />
                        <label for="jsonSelectiveInput" class="btn btn-primary import-selection-btn">Import data for selection</label>
                        <input type="file" id="jsonSelectiveInput" name="jsonSelectiveInput" accept=".json" style="display: none;" />
                    </div>
                    <div class="col zero-margin zero-padding mt-3 d-none" id="backup-select-col">
                        <ul class="nav nav-tabs" id="backupTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link active" id="notes-tab" data-bs-toggle="tab" href="#notes-selection-list" role="tab">Notes</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="tasks-tab" data-bs-toggle="tab" href="#tasks-selection-list" role="tab">Tasks</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="index-tab" data-bs-toggle="tab" href="#index-selection-list" role="tab">Index</a>
                            </li>
                            <div class="col d-flex align-items-center">
                                <input type="text" class="search-bar-sm w-50" id="selection-search" placeholder="Type to search selections">
                            </div>
                        </ul>
                        <div class="tab-content mt-2">
                            <div class="tab-pane fade show active" id="notes-selection-list" role="tabpanel">
                            </div>
                            <div class="tab-pane fade" id="tasks-selection-list" role="tabpanel">
                            </div>
                            <div class="tab-pane fade" id="index-selection-list" role="tabpanel">
                            </div>
                        </div>
                        <button class="btn btn-primary restore-selection-btn mt-4">Perform overwriting restore of selected data</button>
                    </div>
                </div>
                <div class="section-heading mt-4">
                    Restore all data by category
                </div>
                <div class="row flex settings-section align-contents-center">
                    <div class="col-auto zero-margin zero-padding">Restore only the data from a given data category from the provided JSON backup
                    </div>
                    <div class="col-auto zero-margin zero-padding mt-2 w-100">
                        <label for="jsonIndexInput" class="btn btn-primary index-restore-btn">Upload data to restore search index</label>
                        <input type="file" id="jsonIndexInput" name="jsonIndexInput" accept=".json" style="display: none;" />
                        <label for="jsonInput" class="btn btn-primary tasks-restore-btn">Upload data to restore tasks</label>
                        <input type="file" id="jsonInput" name="jsonInput" accept=".json" style="display: none;" />
                        <label for="jsonNoteInput" class="btn btn-primary note-restore-btn">Upload data to restore notes</label>
                        <input type="file" id="jsonNoteInput" name="jsonNoteInput" accept=".json" style="display: none;" />
                    </div>
                </div>
                <div class="section-heading mt-4">
                    Export data to backup
                </div>
                <div class="row flex settings-section align-contents-center">
                    <div class="col-auto zero-margin zero-padding">All data will be exported to a JSON file from which data can be restored in future
                    </div>
                    <div class="col-auto zero-margin zero-padding mt-2 w-100">
                        <button class="btn btn-primary backup-btn">Export extension data to JSON file</button>
                    </div>
                </div>
                <div class="section-heading mt-4">
                    Reset
                </div>
                <div class="row flex settings-section align-contents-center mb-2">
                    <div class="col-auto zero-margin zero-padding">Remove all data and reset extension settings
                    </div>
                    <div class="col-auto zero-margin zero-padding mt-2 w-100" data-bs-toggle="modal" data-bs-target="#eraseDataModal">
                        <button class="btn btn-danger reset-btn">Erase all data and settings</button>
                    </div>
                </div>
            </div>
            <div class="settings-pane hidden" id="indexing-pane">
                <div class="section-heading index-heading">
                    Allowed sites
                </div>
                <div class="row flex settings-section align-contents-center">
                    <div class="col-auto zero-margin zero-padding index-info">Indexing will occur whenever these host names are visited.
                    </div>
                    <ul class="nav nav-tabs mt-2" id="indexerTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="sites-tab" data-bs-toggle="tab" href="#sites" role="tab">Sites</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="urls-tab" data-bs-toggle="tab" href="#urls" role="tab">URLs</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="string-matches-tab" data-bs-toggle="tab" href="#string-matches" role="tab">String matches</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="regex-tab" data-bs-toggle="tab" href="#regex" role="tab">RegEx</a>
                        </li>
                        <div class="col d-flex align-items-center">
                            <input type="text" class="search-bar-sm" id="rule-search" placeholder="Type to search allow list">
                        </div>
                        <div class="col d-flex justify-content-xxl-end zero-margin">
                            <button class="btn btn-primary add-rule-btn tab-section-btn" data-bs-toggle="modal" data-bs-target="#addRuleModal">Add allow rule</button>
                        </div>
                    </ul>
                    <div class="tab-content mt-2">
                        <div class="tab-pane fade show active" id="sites" role="tabpanel">
                            <ul class="index-list" id="sites-list">
                                <div class="row justify-content-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="warn-2 mt-0 bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                                    </svg>
                                </div>
                                <div class="row justify-contents-center text-center">
                                    <div class="warn-text-2">
                                        No site rules found.
                                    </div>
                                </div>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="urls" role="tabpanel">
                            <ul class="index-list" id="urls-list">
                                <div class="row justify-content-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="warn-2 mt-0 bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                                    </svg>
                                </div>
                                <div class="row justify-contents-center text-center">
                                    <div class="warn-text-2">
                                        No URL rules found.
                                    </div>
                                </div>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="string-matches" role="tabpanel">
                            <ul class="index-list" id="string-matches-list">
                                <div class="row justify-content-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="warn-2 mt-0 bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                                    </svg>
                                </div>
                                <div class="row justify-contents-center text-center">
                                    <div class="warn-text-2">
                                        No string match rules found.
                                    </div>
                                </div>
                            </ul>
                        </div>
                        <div class="tab-pane fade" id="regex" role="tabpanel">
                            <ul class="index-list" id="regex-list">
                                <div class="row justify-content-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="warn-2 mt-0 bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                                    </svg>
                                </div>
                                <div class="row justify-contents-center text-center">
                                    <div class="warn-text-2">
                                        No RegEx rules found.
                                    </div>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="settings-pane d-flex hidden" id="about-pane">
                <div class="row zero-padding zero-margin">
                    <div class="text-center mb-5">
                        <img class="logo-128 zero-padding">
                        <p>
                        <h3>To-Do Make <br>1.0</h3>
                        </p>
                    </div>
                    <h3>Usage</h3>
                    <p>
                    Through the pop-up accessed by clicking the extension in your downloaded extensions, you can access the different features by clicking the arrow icons. <br \>
                    The extension indexes automatically. To search your indexed content, type "@i" in the browser omnibar, then press Tab and enter your search query. 
                    </p>
                    <h3>To-do list</h3>
                    <p>
                    Press the green '+' button to add a new task. You can change the title, description, due date and time, as well as create tags to add to your task here. If you want to add a specific colour to your new tag, you can do so by writing the hex code for the colour in the text box underneath the default colour options. <br />
                    The yellow icon next to the new task button brings up your recently deleted tasks. These are stored for 30 days after deletion. You can restore tasks if you do not want them to be deleted. <br \>
                    The search bar can be used to search by keyword or tag.
                    </p>
                    <h3>Notebook</h3>
                    <p>
                    A new note will be ready to edit when you access the notebook for the first time. After this, a new note can be created by clicking the 'Create new note' button in the top right of the note window. You can also edit and delete notes you've created. <br \>
                    The green button located next to 'My Notes' is used to upload notes you have saved locally on your device if they are a .txt or .md file. <br \>
                    You can use the search bar to search for a keyword or phrase across all your notes.
                    </p>
                    <h3>Appearance</h3>
                    <p>
                    If you wish to change the background of the notes and tasks pages, you can do this by navigating to Settings > Appearance, and under Wallpaper, clicking "Browse for background". Select your image; choose something high quality!<br />
                    </p>   
                    <h3>Changing indexing behaviour</h3>
                    <p>
                    By default, the application indexes pages with the domains "amazon.com", and "a2z.com". You may wish for more or other domains to be indexed when visited. To edit this, navigate to Settings > Indexing, and click "Change allowed sites". <br />
                    </p>
                    <h3>Backup and restoration</h3>
                    <p>
                    To back up your data, navigate to Settings > Backup and Restore, and select "Export extension data to JSON file". <br />
                    To restore data to a new install of the extension, navigate to Settings > Backup and Restore, and select "Restore all from JSON file". If you wish to only restore some data, you can select the relevant option. <br />
                    </p>                 
                    <h3>Developer contact:</h3>
                    <p>
                    Scarlett Anwender<br>
                    2711639a@student.gla.ac.uk<br><br>
                    Jackson Dam<br>
                    2619114d@student.gla.ac.uk<br><br>
                    Zhixiang Feng<br>
                    2616718f@student.gla.ac.uk<br><br>
                    William Hunt<br>
                    2620286h@student.gla.ac.uk<br><br>
                    Leen Jarbouh<br>
                    2580367j@student.gla.ac.uk<br><br>
                    Mojahed Al Rushadi<br>
                    2794899a@student.gla.ac.uk<br><br>
                    Katy O'Neill<br>
                    2563183o@student.gla.ac.uk<br><br>
                    Julian Wang<br>
                    2613319w@student.gla.ac.uk<br><br>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="addRuleModal" rule-loc="allowedSites">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="addRuleModalLabel">Add an allow rule</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addRuleForm">
                        <div class="form-group">
                            <label for="addRuleInput">Specify rule</label>
                            <input type="text" class="form-control" id="addRuleInput" placeholder="Enter allow rule here" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" form="addRuleForm" data-bs-dismiss="modal" id="addRule" class="btn btn-primary">Add Rule</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="deleteRuleModal" rule-loc="allowedSites" rule-to-delete="">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="deleteRuleModalLabel">Confirm deletion</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this rule?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger regex-delete-btn" data-bs-dismiss="modal" id="confirmDelete">Delete</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="ruleErrorModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="ruleErrorModalLabel">Error</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    This allow rule already exists.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="dismissError">OK</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="eraseDataModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-danger">Erase all data and settings</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p><strong>You are about to erase all data and settings of the extension.</strong><br><br> All data and settings will be erased. <br>This action cannot be undone.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="confirm-erase-data-btn">Erase all data and settings</button>
          </div>
        </div>
      </div>
    </div>
    <script src="assets/jquery-3.7.1.min.js"></script>
    <script src="todo_make_settings.js"></script>
    <script src="assets/bootstrap.min.js"></script>
</body>
</html>
